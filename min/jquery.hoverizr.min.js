!function(t){t.fn.hoverizr=function(e){var a={effect:"grayscale",overlay:"top",container:"overlayed",width:"responsive",height:"auto",stretch:"no",speedIn:"slow",speedOut:"fast"},e=t.extend(a,e);if("none"!=t("img").css("maxWidth")){var i=1;t("img").css("maxWidth","none")}else var i=0;this.each(function(){t(this).wrap('<div class="'+e.container+'" />'),t(this).parent("."+e.container).css({position:"relative"}),t(this).parent("."+e.container).append('<canvas class="canv"></canvas>'),t(this).next(".canv").css({position:"absolute",top:"0",left:"0","z-index":10}),"top"==e.overlay?t(this).css({"z-index":-1}):(t(this).css({"z-index":1}),t(this).next(".canv").css({display:"none"}));var a=t(this).width(),i=t(this).height();t(this).next(".canv").attr({width:a,height:i});var n=t(this).next(".canv").get(0),s=n.getContext("2d"),h=t(this).get(0);if(s.drawImage(h,0,0),"noise"!=e.effect){try{try{var r=s.getImageData(0,0,a,i)}catch(c){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");var r=s.getImageData(0,0,a,i)}}catch(c){throw new Error("unable to access image data: "+c)}alert("Pixel an (0,0): rgba("+r.data[4]+", "+r.data[5]+", "+r.data[6]+","+r.data[6]+")");var o=r.data}switch(e.effect){case"invert":for(var d=0,v=o.length;v>d;d+=4)o[d]=255-o[d],o[d+1]=255-o[d+1],o[d+2]=255-o[d+2];break;case"blur":var l,g,p=new Image;for(p.src=t(this).attr("src"),s.globalAlpha=.0625,g=-3;3>g;g+=1)for(l=-3;3>l;l+=1)s.drawImage(p,l,g);s.globalAlpha=1;break;default:for(var d=0,v=o.length;v>d;d+=4){var f=.3*o[d]+.59*o[d+1]+.11*o[d+2];o[d]=f,o[d+1]=f,o[d+2]=f}}"blur"!=e.effect&&s.putImageData(r,0,0),"responsive"==e.width?(t(this).next(".canv").css({"max-width":"100%"}),t(this).css({"max-width":"100%"}),t(this).parent("."+e.container).css({width:"100%"})):"no"==e.stretch?t(this).parent("."+e.container).css({width:e.width,height:e.height,overflow:"hidden"}):(t(this).next(".canv").css({width:e.width,height:e.height}),t(this).css({width:e.width,height:e.height}),t(this).parent("."+e.container).css({width:e.width,height:e.height}))}),1==i&&t("img").css("maxWidth","100%"),"top"==e.overlay?this.parent("."+e.container).hover(function(){t(this).children(".canv").stop(!0,!0).fadeOut(e.speedOut)},function(){t(this).children(".canv").stop(!0,!0).fadeIn(e.speedIn)}):this.parent("."+e.container).hover(function(){t(this).children(".canv").stop(!0,!0).fadeIn(e.speedOut)},function(){t(this).children(".canv").stop(!0,!0).fadeOut(e.speedIn)})}}(jQuery);